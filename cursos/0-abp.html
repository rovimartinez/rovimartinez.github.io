<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Módulo 1 - Robótica educativa</title>
    <link rel="stylesheet" href="../css/estilo-curso1.css">
    <link rel="stylesheet" href="../css/estilo-menu1.css">
    <link rel="stylesheet" href="../css/estilo-popup.css">
  </head>
<body>
     <!-- Contenedor de la información -->

     <body>
        <div id="container">
            <header>
                <h1>Robótica educativa</h1>
            </header>

            <!-- Menú desplegable -->
            <div id="menu">
                <button id="close-menu">X</button>
                <div id="menu-toggle">
                    <div class="line">
                        <div class="menu-text">Menú</div>
                    </div>
                    <div class="line"></div>
                    <div class="line"></div>
                </div>
                <ul>
                    <li><a href="#" class="accordion-toggle">Proyecto 1</a>
                        <div class="accordion-content">
                            <ul>
                                <li>Viñeta 1</li>
                                <li>Viñeta 2</li>
                                <li>Viñeta 3</li>
                            </ul>
                        </div>
                    </li>
                    <li><a href="#" class="accordion-toggle">Proyecto 2</a>
                        <div class="accordion-content">
                            <p>Contenido del Proyecto 2</p>
                        </div>
                    </li>
                    <li><a href="#" class="accordion-toggle">Proyecto 3</a>
                        <div class="accordion-content">
                            <p>Contenido del Proyecto 3</p>
                        </div>
                    </li>
                    <li><a href="#" class="accordion-toggle">Proyecto 4</a>
                        <div class="accordion-content">
                            <p>Contenido del Proyecto 4</p>
                        </div>
                    </li>
                    <li><a href="#" class="accordion-toggle">Proyecto 5</a>
                        <div class="accordion-content">
                            <p>Contenido del Proyecto 5</p>
                        </div>
                    </li>
                    <!-- Boton para cerrar sesión -->
                    <div class="container">
                        <form id="logoutForm">
                            <input type="submit" value="Cerrar sesión" class="button">
                        </form>
                    </div>
                </ul>
            </div>
        </div>

        <!-- Información de la pagina -->
        <div id="content">
            <h2>Aprendizaje Basado en Proyectos (ABP)</h2>
            <p>En este curso de robótica educativa, nos introduciremos en el sistema de Aprendizaje Basado en
                Proyectos
                (ABP).</p>
            <p>El ABP es una metodología que promueve un aprendizaje activo y práctico, donde los estudiantes
                desarrollan
                habilidades mediante la realización de proyectos reales. Durante este módulo, exploraremos cómo
                aplicar el
                ABP en la fabricación de un automóvil básico con movimientos programados.</p>
            <p>Este proyecto permitirá a los estudiantes comprender los principios básicos de la robótica,
                aprender a
                programar movimientos y familiarizarse con las partes de un automóvil. A través de actividades
                prácticas,
                los estudiantes adquirirán habilidades en programación, construcción y resolución de problemas.
            </p>
            <br>


            <br><br><br>
        </div>
        <footer>
            <p>&copy; 2023 RoboMakerLab. Todos los derechos reservados.</p>
        </footer>






        <!-- Ventana emergente -->
        <div id="inactive-popup" class="popup" style="display: none;">
            <p>Esta página se cerrará por inactividad</p>
            <p id="countdown">5</p>
        </div>

>        <footer>
            <p>&copy; 2023 Robótica Educativa. Todos los derechos reservados.</p>
        </footer>


        <script src="../js/controlMenu.js"> </script>
        <script src="../js/carrusel.js"></script>
        <script>
            // Código JavaScript para controlar el carrusel

            const carousel = document.querySelector('.carousel');
            const progressBarFill = document.querySelector('.progress-bar-fill');
            const prevButton = document.querySelector('.prev-button');
            const nextButton = document.querySelector('.next-button');

            let currentIndex = 0;
            const slides = carousel.children;

            function showSlide(index) {
                for (let i = 0; i < slides.length; i++) {
                    slides[i].style.display = 'none';
                }

                slides[index].style.display = 'flex';
                progressBarFill.style.width = ((index + 1) / slides.length) * 100 + '%';
            }

            // Muestra el primer slide al cargar la página
            showSlide(currentIndex);

            // Evento para avanzar al siguiente slide
            function nextSlide() {
                currentIndex++;
                if (currentIndex >= slides.length) {
                    currentIndex = 0;
                }
                showSlide(currentIndex);
            }

            // Evento para retroceder al slide anterior
            function prevSlide() {
                currentIndex--;
                if (currentIndex < 0) {
                    currentIndex = slides.length - 1;
                }
                showSlide(currentIndex);
            }

            // Agrega eventos a los botones de control
            prevButton.addEventListener('click', prevSlide);
            nextButton.addEventListener('click', nextSlide);
        </script>

        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
            import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics.js";
            import { getAuth, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
            import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
                apiKey: "AIzaSyBvaHVzrjt89982iejiSgDq-h4nOKEww7M",
                authDomain: "roboticaeducativa-b5ee2.firebaseapp.com",
                projectId: "roboticaeducativa-b5ee2",
                storageBucket: "roboticaeducativa-b5ee2.appspot.com",
                messagingSenderId: "953005574181",
                appId: "1:953005574181:web:684ed71344e716a1d557cc",
                measurementId: "G-KQVW7RP5X9"
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const analytics = getAnalytics(app);
            const auth = getAuth();


            // Temporizador de cierre de sesión

            var tiempo = 300000; // 5 minutos
            var tiempo2 = 290000; // 10 segundos antes de los 5 minutos

            let logoutTimer; // Variable para almacenar el temporizador de cierre de sesión

            const startLogoutTimer = () => {
                logoutTimer = setTimeout(() => {
                    signOut(auth)
                        .then(() => {
                            // Cerrar sesión automáticamente
                            window.location.href = 'index.html'; // Redireccionar a index.html
                        })
                        .catch((error) => {
                            // Manejar errores de cierre de sesión
                            console.log(error);
                            alert('Error al cerrar sesión.');
                        });
                }, tiempo); // Cerrar sesión después de 10 segundos de inactividad
            };

            const resetLogoutTimer = () => {
                clearTimeout(logoutTimer); // Reiniciar el temporizador de cierre de sesión
                startLogoutTimer(); // Volver a iniciar el temporizador
            };

            onAuthStateChanged(auth, (user) => {
                if (!user) {
                    // User is not authenticated, redirect to index.html
                    window.location.href = 'index.html';
                }
            });

            const logoutForm = document.getElementById('logoutForm');

            logoutForm.addEventListener('submit', (e) => {
                e.preventDefault(); // Prevent form submission

                signOut(auth)
                    .then(() => {
                        // Usuario cerró sesión correctamente
                        window.location.href = 'index.html'; // Redirect to index.html
                    })
                    .catch((error) => {
                        // Manejar errores de cierre de sesión
                        console.log(error);
                        alert('Error al cerrar sesión.');
                    });
            });

            // Reiniciar temporizador al hacer clic o interactuar con la página
            document.addEventListener('click', resetLogoutTimer);
            document.addEventListener('keydown', resetLogoutTimer);
            document.addEventListener('mousemove', resetLogoutTimer);
            document.addEventListener('scroll', resetLogoutTimer);
            document.addEventListener('touchstart', resetLogoutTimer);

            // Iniciar el temporizador de cierre de sesión al cargar la página
            startLogoutTimer();

            var timeout;

            function showInactivePopup() {
                var popup = document.getElementById('inactive-popup');
                popup.style.display = 'block';

                var countdownElement = document.getElementById('countdown');
                countdownElement.textContent = '10';

                var countdown = 10;
                timeout = setInterval(function () {
                    countdown--;
                    countdownElement.textContent = countdown;

                    if (countdown === 0) {
                        hideInactivePopup();
                    }
                }, 1000);
            }

            function hideInactivePopup() {
                var popup = document.getElementById('inactive-popup');
                popup.style.display = 'none';

                clearInterval(timeout);
            }

            var inactivityTime = tiempo2; // 10 segundos de inactividad
            var timeoutID;

            function resetTimer() {
                clearTimeout(timeoutID);
                timeoutID = setTimeout(showInactivePopup, inactivityTime);
                hideInactivePopup();
            }

            window.addEventListener('mousemove', resetTimer);
            window.addEventListener('keydown', resetTimer);
            window.addEventListener('scroll', resetTimer);
            window.addEventListener('touchstart', resetTimer);

            resetTimer();


        </script>
    </body>

</html>